ms_base


                                        // 15.02.2025 - —Å–æ–∑–¥–∞—ë–º –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç

1. –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä—ë—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (routes/web.php) –¥–ª—è –∞—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
Route::middleware(['auth'])->group(function () {
    Route::get('/profile', [ProfileController::class, 'edit'])->name('profile.edit');

2. –°–æ–∑–¥–∞–¥–∏–º ProfileController, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ (–º–µ—Ç–æ–¥—ã edit, update, destroy)

3. –°–æ–∑–¥–∞–¥–∏–º –õ–∏—á–Ω—ã–π –ö–∞–±–∏–Ω–µ—Ç - –≤–∏–¥ –≥–¥–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∞–≤–∞—Ç–∞—Ä –∏ –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –≤—Å–µ –ø–æ–ª—è –¥–∞–Ω–Ω—ã–º–∏, —á—Ç–æ–±—ã —é–∑–µ—Ä –º–æ–≥ –∏—Ö –º–µ–Ω—è—Ç—å

4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –≤ users (–µ—Å–ª–∏ –Ω–µ—Ç)
–ï—Å–ª–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ users –Ω–µ—Ç avatar, –¥–æ–±–∞–≤—å —ç—Ç–æ –ø–æ–ª–µ —Å –ø–æ–º–æ—â—å—é –º–∏–≥—Ä–∞—Ü–∏–∏:

php artisan make:migration add_avatar_to_users_table --table=users
( $table->string('avatar')->nullable()->after('password');)

5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é (navbar)

–¢–µ–ø–µ—Ä—å —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç, –≥–¥–µ –æ–Ω –º–æ–∂–µ—Ç:
‚úÖ –ò–∑–º–µ–Ω—è—Ç—å –∏–º—è, email, –ø–∞—Ä–æ–ª—å
‚úÖ –ó–∞–≥—Ä—É–∂–∞—Ç—å/–∏–∑–º–µ–Ω—è—Ç—å –∞–≤–∞—Ç–∞—Ä
‚úÖ –£–¥–∞–ª—è—Ç—å —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç



                                            –î–æ–±–∞–≤–ª—è–µ–º –∞–≤–∞—Ç–∞—Ä—ã –∫ –ø—Ä–æ—Ñ–∏–ª—é

//–¥–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∞–≤–∞—Ç–∞—Ä –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞.

1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
–¢–µ–±–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –º–æ–¥–µ–ª—å User.php –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –µ—Å—Ç—å –ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–≤–∞—Ç–∞—Ä,
–∏ –µ—Å–ª–∏ –Ω–µ—Ç ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.

2. –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫—É –∏ –¥–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∞–≤–∞—Ç–∞—Ä
- –í public/images/ –∑–∞–≥—Ä—É–∑–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∞–≤–∞—Ç–∞—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, default-avatar.png).
- –¢–µ–ø–µ—Ä—å, –µ—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –∞–≤–∞—Ç–∞—Ä–∞, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è images/default-avatar.png.
storage\app\public\images\default-avatar.png

3. –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (AuthController - –º–µ—Ç–æ–¥ create)

4. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ –≤ —à–∞–ø–∫–µ - –¥–æ–±–∞–≤–∏–º –∞–≤–∞—Ç–∞—Ä –≤ –∫–æ–¥ –≤ navbar
‚úÖ –¢–µ–ø–µ—Ä—å —Ä—è–¥–æ–º —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±—É–¥–µ—Ç –µ–≥–æ –∞–≤–∞—Ç–∞—Ä.
‚úÖ –ï—Å–ª–∏ —É –Ω–µ–≥–æ –Ω–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π.

5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–≤–∞—Ç–∞—Ä–æ–≤
–õ—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç ‚Äî —Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –∞–≤–∞—Ç–∞—Ä—ã –≤ –æ–¥–Ω–æ–π –ø–∞–ø–∫–µ storage/app/public/avatars/.
–ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ, –∏–∑–º–µ–Ω–∏–º –∫–æ–¥ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤–∞—Ç–∞—Ä–∞.

–ù–∞—Å—Ç—Ä–æ–∏–º profile.update (–≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ ProfileController, –º–µ—Ç–æ–¥ update) –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤–∞—Ç–∞—Ä–∞

‚úÖ –¢–µ–ø–µ—Ä—å –≤—Å–µ –∞–≤–∞—Ç–∞—Ä—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ storage/app/public/avatars/
‚úÖ –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –±—ã–ª –∞–≤–∞—Ç–∞—Ä, —Å—Ç–∞—Ä—ã–π —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–æ–≤–æ–≥–æ
‚úÖ –§–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –±–æ–ª—å—à–µ 2MB –∏ –º–∞–∫—Å–∏–º—É–º 184x184 px

6. –†–∞–∑—Ä–µ—à–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º –∞–≤–∞—Ç–∞—Ä–∞–º
–ß—Ç–æ–±—ã –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ asset(), –≤—ã–ø–æ–ª–Ω–∏ –∫–æ–º–∞–Ω–¥—É:

php artisan storage:link

–¢–µ–ø–µ—Ä—å storage/app/public/avatars/ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –∫–∞–∫ /storage/avatars/.

–í—ã–≤–æ–¥:
üîπ –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∞–≤–∞—Ç–∞—Ä
üîπ –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–æ–≤–æ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞ —Å—Ç–∞—Ä—ã–π —É–¥–∞–ª—è–µ—Ç—Å—è
üîπ –í —à–∞–ø–∫–µ —Å–∞–π—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∞–≤–∞—Ç–∞—Ä —Ä—è–¥–æ–º —Å –∏–º–µ–Ω–µ–º
üîπ –ê–≤–∞—Ç–∞—Ä—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ storage/app/public/avatars/


                                        –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—á—Ç—ã:   ('unique:users,email,' . $user->id)                    !!!!!!!
                                        (—á—Ç–æ–±—ã –º–æ–≥–ª–∏ –º–µ–Ω—è—Ç—å –µ—ë –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ)

'email' => 'required|email|unique:users,email,' . $user->id,

'unique:users,email,' . $user->id

–í–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ unique –≤ Laravel —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:
unique:table,column,except,idColumn

except,idColumn - –∏—Å–∫–ª—é—á–∞–µ—Ç –∏–∑ –ø–æ–∏—Å–∫–∞ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–∞–∫–∏–º id    . $user->id

–ì–¥–µ:

table ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ users).
column ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ–º (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ email).
except ‚Äî ID —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –µ–≥–æ –∑–∞–ø–∏—Å—å.
idColumn ‚Äî —Å—Ç–æ–ª–±–µ—Ü, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é id).

 'unique:users,email,' . $user->id
‚úîÔ∏è –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å email —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ users.
‚úîÔ∏è –ò—Å–∫–ª—é—á–∞–µ—Ç –∏–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å id = $user->id, —á—Ç–æ–±—ã –æ–Ω –º–æ–≥ –æ—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ—é –∂–µ –ø–æ—á—Ç—É –±–µ–∑ –æ—à–∏–±–∫–∏.


–ï—Å–ª–∏ –¥—Ä—É–≥–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç email ‚Äî –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞.

